---
- hosts: test-vms

  roles:
    
    - role: zanardo.supervisor

  tasks:

    - name: verifica se supervisor est√° rodando
      stat:
        path: /var/run/supervisor.sock
      register: supervisor_stat

    - name: testa se socket existe
      assert:
        that:
          - "supervisor_stat.stat.issock is defined"

    - name: testa update
      shell:
        warn=no
        supervisorctl update
